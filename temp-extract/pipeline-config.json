{
  "pipeline": {
    "name": "lambdadeploy-pipeline",
    "roleArn": "arn:aws:iam::ACCOUNT_ID:role/CodePipelineServiceRole",
    "artifactStore": {
      "type": "S3",
      "location": "lambdadeploy-artifacts"
    }
  },
  "source": {
    "provider": "GitHub",
    "repositoryUrl": "https://github.com/username/repo",
    "branch": "main",
    "webhookEnabled": true
  },
  "build": {
    "provider": "CodeBuild",
    "projectName": "lambdadeploy-build",
    "buildSpec": "buildspec.yml",
    "environment": {
      "type": "LINUX_CONTAINER",
      "image": "aws/codebuild/amazonlinux2-x86_64-standard:4.0",
      "computeType": "BUILD_GENERAL1_SMALL"
    }
  },
  "deploy": {
    "provider": "Lambda",
    "functionName": "lambdadeploy-app",
    "runtime": "nodejs18.x",
    "handler": "index.handler"
  },
  "notifications": {
    "slack": {
      "enabled": true,
      "webhookUrl": "SLACK_WEBHOOK_URL",
      "channel": "#deployments",
      "events": ["started", "succeeded", "failed"]
    },
    "email": {
      "enabled": false,
      "recipients": ["devops@company.com"]
    }
  },
  "stages": [
    {
      "name": "Source",
      "actions": [
        {
          "name": "SourceAction",
          "actionTypeId": {
            "category": "Source",
            "owner": "ThirdParty",
            "provider": "GitHub",
            "version": "1"
          }
        }
      ]
    },
    {
      "name": "Build",
      "actions": [
        {
          "name": "BuildAction",
          "actionTypeId": {
            "category": "Build",
            "owner": "AWS",
            "provider": "CodeBuild",
            "version": "1"
          }
        }
      ]
    },
    {
      "name": "Deploy",
      "actions": [
        {
          "name": "DeployAction",
          "actionTypeId": {
            "category": "Invoke",
            "owner": "AWS",
            "provider": "Lambda",
            "version": "1"
          }
        }
      ]
    }
  ]
}